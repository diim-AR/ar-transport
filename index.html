<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v7.0.0/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <style>
      body { margin: 0; overflow: hidden; }
    </style>
  </head>
  <body>
    <a-scene mindar-image="imageTargetSrc: assets/marker/targets.mind;" 
             color-space="sRGB" 
             renderer="colorManagement: true, physicallyCorrectLights" 
             vr-mode-ui="enabled: false" 
             device-orientation-permission-ui="enabled: false">

      <a-assets>
        <!-- Video assets for transport -->
        <video id="vidAngkot" src="assets/video/angkot.mp4" loop playsinline crossorigin="anonymous"></video>
        <video id="vidBus" src="assets/video/bus.mp4" loop playsinline crossorigin="anonymous"></video>
        <video id="vidFerry" src="assets/video/ferry.mp4" loop playsinline crossorigin="anonymous"></video>
        <video id="vidKereta" src="assets/video/kereta.mp4" loop playsinline crossorigin="anonymous"></video>
        <video id="vidMonorel" src="assets/video/monorel.mp4" loop playsinline crossorigin="anonymous"></video>
        <video id="vidMRT" src="assets/video/mrt.mp4" loop playsinline crossorigin="anonymous"></video>
        <video id="vidOjek" src="assets/video/ojek.mp4" loop playsinline crossorigin="anonymous"></video>
        <video id="vidPesawat" src="assets/video/pesawat.mp4" loop playsinline crossorigin="anonymous"></video>
        <video id="vidTaksi" src="assets/video/taksi.mp4" loop playsinline crossorigin="anonymous"></video>
        <video id="vidTram" src="assets/video/tram.mp4" loop playsinline crossorigin="anonymous"></video>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <!-- Marker Entities for transport -->
      <a-entity mindar-image-target="targetIndex: 0" id="markerAngkot">
        <a-video src="#vidAngkot" width="0.5" height="1" position="0 0 0.1"></a-video>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 1" id="markerBus">
        <a-video src="#vidBus" width="1.1" height="1.8" position="0 -0.3 0"></a-video>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 2" id="markerFerry">
        <a-video src="#vidFerry" width="1.1" height="1.8" position="0 -0.3 0"></a-video>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 3" id="markerKereta">
        <a-video src="#vidKereta" width="1.1" height="1.8" position="0 -0.3 0"></a-video>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 4" id="markerMonorel">
        <a-video src="#vidMonorel" width="1.1" height="1.8" position="0 -0.3 0"></a-video>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 5" id="markerMRT">
        <a-video src="#vidMRT" width="1.1" height="1.8" position="0 -0.3 0"></a-video>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 6" id="markerOjek">
        <a-video src="#vidOjek" width="1.1" height="1.8" position="0 -0.3 0"></a-video>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 7" id="markerPesawat">
        <a-video src="#vidPesawat" width="1.1" height="1.8" position="0 -0.3 0"></a-video>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 8" id="markerTaksi">
        <a-video src="#vidTaksi" width="1.1" height="1.8" position="0 -0.3 0"></a-video>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 9" id="markerTram">
        <a-video src="#vidTram" width="1.1" height="1.8" position="0 -0.3 0"></a-video>
      </a-entity>

    </a-scene>

    <script>
      const videos = {
        markerAngkot: document.querySelector('#vidAngkot'),
        markerBus: document.querySelector('#vidBus'),
        markerFerry: document.querySelector('#vidFerry'),
        markerKereta: document.querySelector('#vidKereta'),
        markerMonorel: document.querySelector('#vidMonorel'),
        markerMRT: document.querySelector('#vidMRT'),
        markerOjek: document.querySelector('#vidOjek'),
        markerPesawat: document.querySelector('#vidPesawat'),
        markerTaksi: document.querySelector('#vidTaksi'),
        markerTram: document.querySelector('#vidTram')
      };

      Object.entries(videos).forEach(([markerId, videoEl]) => {
        const marker = document.querySelector(`#${markerId}`);
        marker.addEventListener('targetFound', () => {
          videoEl.play();
        });
        marker.addEventListener('targetLost', () => {
          videoEl.pause();
        });
      });
    </script>
  </body>
</html>

